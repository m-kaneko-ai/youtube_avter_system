# 6. 動画制作ページ

## 基本情報

| 項目 | 内容 |
|-----|------|
| パス | `/production` |
| 認証 | 必要 |
| ロール | Owner, Team |

## タブ構成

| タブ | 内容 |
|-----|------|
| 音声生成 | ボイスクローン |
| アバター動画 | HeyGen動画生成 |
| 編集・B-roll | 編集・素材挿入 |

---

## タブ1: 音声生成

### ワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────┐
│  [音声生成] [アバター動画] [編集・B-roll]                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  音声生成 (MiniMax Audio)                                   │
│                                                             │
│  企画: AIアバターで月100万円稼ぐ完全ガイド                   │
│  台本: Gemini版 (2,340字 / 約8分)                           │
│                                                             │
│  ─────────────────────────────────────────────────────      │
│                                                             │
│  ボイス設定                                                  │
│                                                             │
│  ボイスプロファイル: [金子光義（メイン） ▼]                  │
│                                                             │
│  話速: [━━━━━●━━━] 1.0x                                    │
│  ピッチ: [━━━━●━━━━] 0                                      │
│  抑揚: [━━━━━━●━━] 1.2                                      │
│                                                             │
│  [▶ プレビュー再生（冒頭30秒）]                             │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 🔊 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 0:30          │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  [🤖 全編音声を生成]                                        │
│                                                             │
│  ─────────────────────────────────────────────────────      │
│                                                             │
│  生成済み音声                                                │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ ✅ 音声生成完了                                       │   │
│  │ ファイル: audio_20251211_001.mp3                      │   │
│  │ 長さ: 8:24                                            │   │
│  │                                                      │   │
│  │ [▶ 再生] [ダウンロード] [再生成]                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│                              [次へ: アバター動画生成]        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### ボイスプロファイル管理

```
┌─────────────────────────────────────────────────────────────┐
│  ボイスプロファイル管理                           [×]        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  登録済みプロファイル                          [+ 新規登録]  │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 名前            │ 言語   │ サンプル │ 作成日    │ 操作│   │
│  ├─────────────────┼────────┼──────────┼───────────┼─────┤   │
│  │ 金子光義（メイン）│ 日本語 │ [▶]     │ 2025/11/01│ ... │   │
│  │ 金子光義（落着き）│ 日本語 │ [▶]     │ 2025/11/15│ ... │   │
│  │ English Voice   │ 英語   │ [▶]     │ 2025/12/01│ ... │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  新規登録                                                    │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ プロファイル名: [                              ]      │   │
│  │ 言語: [日本語 ▼]                                     │   │
│  │ サンプル音声: [ファイルを選択] (30秒以上推奨)        │   │
│  │                                                      │   │
│  │                              [登録]                   │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## タブ2: アバター動画

### ワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────┐
│  [音声生成] [アバター動画] [編集・B-roll]                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  アバター動画生成 (HeyGen)                                  │
│                                                             │
│  音声: audio_20251211_001.mp3 (8:24) ✅                     │
│                                                             │
│  ─────────────────────────────────────────────────────      │
│                                                             │
│  アバター設定                                                │
│                                                             │
│  アバター: [金子光義アバター ▼]                             │
│                                                             │
│  ┌───────────────────────────────────────┐                 │
│  │                                       │                 │
│  │         [アバタープレビュー]           │                 │
│  │                                       │                 │
│  └───────────────────────────────────────┘                 │
│                                                             │
│  背景: [オフィス風 ▼]                                       │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐                         │
│  │オフィ│ │スタジ│ │グリーン│ │カスタム│                         │
│  │ス風 │ │オ   │ │バック │ │     │                         │
│  │ ◎  │ │ ○  │ │  ○  │ │  ○  │                         │
│  └─────┘ └─────┘ └─────┘ └─────┘                         │
│                                                             │
│  [🤖 アバター動画を生成]                                    │
│                                                             │
│  ─────────────────────────────────────────────────────      │
│                                                             │
│  生成状況                                                    │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ ⏳ 生成中... (推定残り時間: 約15分)                   │   │
│  │ ━━━━━━━━━━━━━━━━━━━━━━━━░░░░░░░░░░ 65%              │   │
│  │                                                      │   │
│  │ ステータス: セグメント3/5 処理中                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│                              [キャンセル]                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 生成完了後

```
┌─────────────────────────────────────────────────────────────┐
│  生成結果                                                    │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                      │   │
│  │              [動画プレビュー]                         │   │
│  │                                                      │   │
│  │  ▶ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8:24          │   │
│  │                                                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ✅ 生成完了                                                │
│  ファイル: avatar_video_20251211_001.mp4                    │
│  解像度: 1920x1080                                          │
│  長さ: 8:24                                                 │
│                                                             │
│  [ダウンロード] [再生成]            [次へ: 編集・B-roll]     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## タブ3: 編集・B-roll

### ワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────┐
│  [音声生成] [アバター動画] [編集・B-roll]                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  編集・B-roll挿入                                           │
│                                                             │
│  ベース動画: avatar_video_20251211_001.mp4 (8:24) ✅        │
│                                                             │
│  ─────────────────────────────────────────────────────      │
│                                                             │
│  タイムライン                                                │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 0:00    2:00    4:00    6:00    8:00                │   │
│  │ |━━━━━━━|━━━━━━━|━━━━━━━|━━━━━━━|                    │   │
│  │ [アバター動画 ━━━━━━━━━━━━━━━━━━━━━━━━━━━]          │   │
│  │      [B1]   [B2]       [B3]    [B4]                 │   │
│  │           [スライド1]      [スライド2]               │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  B-roll素材                                [🤖 AI生成]      │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐                    │   │
│  │ │ B1  │ │ B2  │ │ B3  │ │ B4  │   [+ アップロード] │   │
│  │ │ AI  │ │ AI  │ │ AI  │ │ AI  │                    │   │
│  │ └─────┘ └─────┘ └─────┘ └─────┘                    │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  補足スライド                            [🤖 AI生成]        │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ ┌─────┐ ┌─────┐                                     │   │
│  │ │ S1  │ │ S2  │                    [+ アップロード] │   │
│  │ │図解 │ │図解 │                                     │   │
│  │ └─────┘ └─────┘                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  [Vrewで編集] [Premiereで編集]                              │
│                                                             │
│  ─────────────────────────────────────────────────────      │
│                                                             │
│  最終動画                                                    │
│  [最終動画をアップロード]                                    │
│                                                             │
│                              [承認依頼を送信]                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### B-roll AI生成設定

```
┌─────────────────────────────────────────────────────────────┐
│  B-roll AI生成                                   [×]        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  生成エンジン: [Veo ▼]                                      │
│                                                             │
│  台本から自動提案されたシーン:                              │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ □ 1. オフィスでPCを操作する人物 (0:45-0:55)          │   │
│  │ □ 2. グラフが上昇するアニメーション (2:10-2:20)      │   │
│  │ □ 3. スマートフォンを見る手元 (4:30-4:40)            │   │
│  │ □ 4. タイムラプス的な作業風景 (6:00-6:15)            │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  スタイル: [モダン・ビジネス ▼]                             │
│  長さ: [5-10秒 ▼]                                           │
│                                                             │
│                              [生成開始]                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 状態管理

```typescript
interface ProductionState {
  activeTab: 'audio' | 'avatar' | 'editing';
  video: Video;
  audio: {
    voiceProfile: VoiceProfile;
    settings: AudioSettings;
    generated: GeneratedAudio | null;
    isGenerating: boolean;
  };
  avatar: {
    avatarProfile: AvatarProfile;
    background: string;
    generated: GeneratedVideo | null;
    isGenerating: boolean;
    progress: number;
  };
  editing: {
    brolls: BRoll[];
    slides: Slide[];
    timeline: TimelineItem[];
    finalVideo: string | null;
  };
}
```

## API連携

| エンドポイント | 用途 |
|--------------|------|
| GET /api/voice-profiles | ボイスプロファイル一覧 |
| POST /api/voice-profiles | プロファイル登録 |
| POST /api/audio/generate | 音声生成 |
| POST /api/avatar/generate | アバター動画生成 |
| GET /api/avatar/status/:jobId | 生成状況確認 |
| POST /api/broll/generate | B-roll生成 |
| POST /api/videos/:id/upload-final | 最終動画アップロード |
