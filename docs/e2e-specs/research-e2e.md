# リサーチページ E2Eテスト仕様書

生成日: 2025-12-12
対象ページ: /research
テスト項目数: 45

---

## テスト環境

| 項目 | 値 |
|------|-----|
| フレームワーク | Playwright |
| ブラウザ | Chromium, Firefox, WebKit |
| ベースURL | http://localhost:5173 |
| 認証 | admin@example.com / admin123 |

---

## 1. 共通テスト

### 1.1 ページアクセス

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| C-001 | 未認証でアクセス | ログインページにリダイレクト | High |
| C-002 | 認証済みでアクセス | リサーチページが表示される | High |
| C-003 | 権限のないロールでアクセス | 403エラーまたはリダイレクト | High |
| C-004 | ページタイトル確認 | 「リサーチ」が表示される | Medium |
| C-005 | サブタイトル確認 | 「トレンドと競合の分析」が表示される | Low |

### 1.2 タブナビゲーション

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| C-006 | デフォルトタブ | 競合リサーチタブがアクティブ | High |
| C-007 | トレンド分析タブクリック | トレンド分析コンテンツ表示 | High |
| C-008 | コメント分析タブクリック | コメント分析コンテンツ表示 | High |
| C-009 | タブ切り替え後の状態保持 | URLパラメータに反映 | Medium |

### 1.3 テーマ切り替え

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| C-010 | ライトモード表示 | 白背景、暗いテキスト | Medium |
| C-011 | ダークモード切り替え | 暗い背景、明るいテキスト | Medium |
| C-012 | テーマ状態永続化 | リロード後も維持 | Low |

---

## 2. 競合リサーチタブ

### 2.1 チャンネル検索

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| CR-001 | 検索入力欄表示 | プレースホルダー「チャンネルURL or 名前を入力」 | High |
| CR-002 | 調査開始ボタン表示 | ボタンがクリック可能 | High |
| CR-003 | 空入力で検索 | エラーメッセージ表示 | High |
| CR-004 | 有効なURL入力 | ローディング表示後、結果表示 | High |
| CR-005 | 無効なURL入力 | エラーメッセージ表示 | High |

### 2.2 競合チャンネル一覧

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| CR-006 | 一覧表示 | 登録済みチャンネルが表示される | High |
| CR-007 | チャンネル名表示 | 各チャンネル名が正しく表示 | High |
| CR-008 | 登録者数表示 | フォーマットされた数値（例: 12.3万） | Medium |
| CR-009 | 動画数表示 | 正しい動画数が表示 | Medium |
| CR-010 | 平均再生数表示 | フォーマットされた数値 | Medium |
| CR-011 | 詳細ボタンクリック | 詳細モーダルまたは詳細ページ | Medium |
| CR-012 | 追加ボタン表示 | 「+ 追加」ボタンがクリック可能 | Medium |

### 2.3 人気動画TOP10

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| CR-013 | セクションタイトル | 「競合の人気動画 TOP10」表示 | High |
| CR-014 | 動画一覧表示 | 最大10件の動画が表示 | High |
| CR-015 | 順位表示 | 1〜10の順位が表示 | Medium |
| CR-016 | 動画タイトル表示 | タイトルが正しく表示 | High |
| CR-017 | 再生数表示 | フォーマットされた再生数 | Medium |
| CR-018 | チャンネル名表示 | チャンネル名が表示 | Medium |
| CR-019 | 企画に追加ボタン | ボタンがクリック可能 | Low |

---

## 3. トレンド分析タブ

### 3.1 フィルター

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| TR-001 | カテゴリ選択表示 | ドロップダウンが表示 | High |
| TR-002 | 期間選択表示 | ドロップダウンが表示 | High |
| TR-003 | カテゴリ変更 | コンテンツが更新される | High |
| TR-004 | 期間変更 | コンテンツが更新される | High |

### 3.2 急上昇キーワード

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| TR-005 | セクションタイトル | 「急上昇キーワード」表示 | High |
| TR-006 | キーワード一覧表示 | 複数キーワードが表示 | High |
| TR-007 | 急上昇アイコン表示 | 🔥アイコンが表示（isFire: true） | Medium |
| TR-008 | 成長率表示 | +XX%形式で表示 | Medium |
| TR-009 | キーワードクリック | 詳細表示またはアクション | Low |

### 3.3 関連ニュース

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| TR-010 | セクションタイトル | 「関連ニュース・話題」表示 | High |
| TR-011 | ニュース一覧表示 | 複数ニュースが表示 | High |
| TR-012 | ニュースタイトルクリック | 外部リンクへ遷移 | Medium |

### 3.4 書籍ランキング

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| TR-013 | セクションタイトル | 「Amazon書籍ランキング」表示 | High |
| TR-014 | 書籍一覧表示 | 複数書籍が表示 | High |
| TR-015 | 評価表示 | ★と数値で表示 | Medium |
| TR-016 | レビュー件数表示 | (XXX件)形式で表示 | Medium |
| TR-017 | レビュー分析ボタン | ボタンがクリック可能 | Low |

---

## 4. コメント分析タブ

### 4.1 動画URL入力

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| CA-001 | 入力欄表示 | プレースホルダー表示 | High |
| CA-002 | 分析開始ボタン表示 | ボタンがクリック可能 | High |
| CA-003 | 空入力で分析 | エラーメッセージ表示 | High |
| CA-004 | 有効なURL入力 | ローディング後、結果表示 | High |
| CA-005 | 無効なURL入力 | エラーメッセージ表示 | High |

### 4.2 感情分析

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| CA-006 | セクションタイトル | 「コメント感情分析」表示 | High |
| CA-007 | ポジティブ率表示 | XX%形式、緑色バー | High |
| CA-008 | 中立率表示 | XX%形式、灰色バー | High |
| CA-009 | ネガティブ率表示 | XX%形式、赤色バー | High |
| CA-010 | 合計100%確認 | 3つの合計が100% | Medium |

### 4.3 頻出キーワード

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| CA-011 | セクションタイトル | 「頻出キーワード」表示 | High |
| CA-012 | タグ形式表示 | キーワードがタグで表示 | High |
| CA-013 | 感情別色分け | ポジティブ/中立/ネガティブで色分け | Medium |
| CA-014 | タグクリック | 詳細表示またはフィルタ | Low |

### 4.4 注目コメント

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| CA-015 | セクションタイトル | 「注目コメント」表示 | High |
| CA-016 | コメント一覧表示 | 複数コメントが表示 | High |
| CA-017 | コメント本文表示 | テキストが正しく表示 | High |
| CA-018 | 高評価数表示 | 👍 XX形式で表示 | Medium |
| CA-019 | 投稿者名表示 | 投稿者名が表示 | Medium |

---

## 5. エラーハンドリング

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| E-001 | API接続エラー | エラーメッセージ表示、リトライボタン | High |
| E-002 | タイムアウト | タイムアウトメッセージ表示 | High |
| E-003 | 404エラー | 「データが見つかりません」表示 | Medium |
| E-004 | 500エラー | 「サーバーエラー」表示 | Medium |

---

## 6. パフォーマンス

| # | テスト項目 | 期待結果 | 優先度 |
|---|-----------|---------|-------|
| P-001 | 初期読み込み時間 | 3秒以内 | High |
| P-002 | タブ切り替え時間 | 500ms以内 | Medium |
| P-003 | 検索レスポンス | 2秒以内 | Medium |

---

## テスト実行コマンド

```bash
# 全テスト実行
npx playwright test tests/e2e/research.spec.ts

# 特定テスト実行
npx playwright test tests/e2e/research.spec.ts -g "競合リサーチ"

# ヘッドレスモードで実行
npx playwright test tests/e2e/research.spec.ts --headed

# デバッグモード
npx playwright test tests/e2e/research.spec.ts --debug
```

---

## テストデータ

### 認証情報
```typescript
const testUser = {
  email: 'admin@example.com',
  password: 'admin123',
  role: 'owner'
};
```

### テスト用URL
```typescript
const testVideoUrl = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ';
const testChannelUrl = 'https://www.youtube.com/@testchannel';
```

---

## 備考

- モックサービス使用時はAPI応答を固定データで検証
- 実API使用時は動的データを考慮したアサーション
- レート制限テストは本番環境では実行しない
