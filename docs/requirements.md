# Creator Studio AI 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
**Creator Studio AI** - AIアバター動画制作自動化システム

### 1.2 目的
AIアバターを活用したYouTube動画制作の全工程（競合調査→企画→台本→動画生成→編集→公開）を自動化し、制作時間を90%削減する。

### 1.3 成果目標
| 指標 | 目標値 |
|-----|-------|
| 台本作成時間削減 | 90%削減 |
| 月間動画制作数/人 | 120本（ショート90本 + 長尺30本） |
| ワークフロー自動化 | 各ステップで人間確認を挟みつつ自動化 |

### 1.4 フェーズ展開
1. **Phase 1**: 個人利用（オーナー1名）
2. **Phase 2**: チーム利用（7名）
3. **Phase 3**: 外部クライアント提供

---

## 2. システムアーキテクチャ

### 2.1 技術スタック

#### フロントエンド
| 技術 | バージョン | 用途 |
|-----|----------|------|
| React | 18.x | UIフレームワーク |
| TypeScript | 5.x | 型安全性 |
| Tailwind CSS | 4.x | スタイリング |
| Lucide React | - | アイコン |
| Zustand | - | 状態管理 |
| React Router | v6 | ルーティング |
| React Query | - | データフェッチング |
| Vite | 5.x | ビルドツール |

#### バックエンド
| 技術 | バージョン | 用途 |
|-----|----------|------|
| Python | 3.11+ | メイン言語 |
| FastAPI | - | APIフレームワーク |
| SQLAlchemy | 2.0 | ORM |
| Celery | - | 非同期タスク |
| Redis | - | キャッシュ/キュー |

#### データベース
| 技術 | 用途 |
|-----|------|
| PostgreSQL (Neon) | メインDB |
| Redis | キャッシュ/セッション |
| pgvector | RAG用ベクトル検索 |

#### インフラ
| 技術 | 用途 |
|-----|------|
| Vercel | フロントエンドホスティング |
| Google Cloud Run | バックエンドホスティング |
| Google Cloud Storage | ファイルストレージ |

---

## 3. 外部サービス連携

### 3.1 AI生成サービス
| サービス | 用途 | 料金目安 |
|---------|------|---------|
| Claude Code Max | スクリプト生成パターンA | $100-200/月 |
| Gemini API | スクリプト生成パターンB | 従量課金 |
| Nano Banana Pro | サムネイル生成 | 従量課金 |
| MiniMax Audio | ボイスクローン | 従量課金 |
| HeyGen API | AIアバター動画生成 | $89/月〜 |

### 3.2 YouTube/競合調査
| サービス | 用途 | 料金目安 |
|---------|------|---------|
| YouTube Data API v3 | 競合チャンネル/動画調査 | 無料（クォータ制限） |
| YouTube Analytics API | 自チャンネル分析 | 無料 |
| Social Blade API | 競合履歴データ | $9.99/月〜 |
| SerpApi | 検索トレンド + 関連レビュー | $50/月〜 |

### 3.3 追加データソース
| サービス | 用途 | 備考 |
|---------|------|------|
| Amazon PA-API | 書籍ランキング・レビュー | 無料（売上実績必要） |
| Instagram Graph API | 自社アカウント分析 | 無料 |

### 3.4 オプションサービス
| サービス | 用途 |
|---------|------|
| Veo API | B-roll動画生成 |
| Sora API | B-roll動画生成 |
| TikTok Content API | 自動投稿 |
| vidIQ API | YouTube SEO |

---

## 4. 認証・権限設計

### 4.1 ロール定義
| ロール | 説明 | 権限レベル |
|-------|------|-----------|
| Owner | システムオーナー | 全権限 |
| Team Member | チームメンバー | 制作・承認権限 |
| Client (Premium+) | 制作代行クライアント | 進捗・成果物・分析閲覧 |
| Client (Premium) | マスターコースクライアント | 進捗・成果物閲覧 |
| Client (Basic) | ベーシックコースクライアント | 進捗・成果物閲覧 |

### 4.2 機能別権限マトリクス
| 機能 | Owner | Team | Premium+ | Premium | Basic |
|------|-------|------|----------|---------|-------|
| ダッシュボード閲覧 | ○ | ○ | ○ | ○ | ○ |
| 競合調査実行 | ○ | ○ | - | - | - |
| 企画作成 | ○ | ○ | - | - | - |
| 台本生成 | ○ | ○ | - | - | - |
| 動画生成 | ○ | ○ | - | - | - |
| 承認（自社） | ○ | ○ | - | - | - |
| 承認（クライアント用） | ○ | - | ○ | ○ | ○ |
| 分析閲覧 | ○ | ○ | ○ | - | - |
| ナレッジ管理 | ○ | ○ | - | - | - |
| システム設定 | ○ | - | - | - | - |

### 4.3 承認フロー
```
[制作物生成] → [Team承認] → [クライアント確認] → [公開]
                    ↓
            [修正依頼] → [再生成]
```

---

## 5. ページ構成（9ページ + タブ構成）

### 5.1 ページ一覧
| # | ページ名 | パス | タブ構成 |
|---|---------|------|---------|
| 1 | ログイン | /login | - |
| 2 | ダッシュボード | /dashboard | 概要 / 今日のタスク / 通知 |
| 3 | リサーチ | /research | 競合調査 / トレンド分析 / キーワード |
| 4 | 企画・計画 | /planning | コンテンツカレンダー / 企画一覧 / AI提案 |
| 5 | 台本・メタデータ | /script | 台本エディタ / タイトル・説明文 / サムネイル |
| 6 | 動画制作 | /production | 音声生成 / アバター動画 / 編集・B-roll |
| 7 | 公開・配信 | /publish | YouTube / TikTok / Instagram / スケジュール |
| 8 | 分析・ナレッジ | /analytics | パフォーマンス / ナレッジDB / レポート |
| 9 | 管理 | /admin | ユーザー管理 / クライアント / システム設定 |

### 5.2 クライアントポータル
| プラン | 閲覧可能コンテンツ |
|-------|------------------|
| Basic | 進捗状況 / 成果物ダウンロード |
| Premium | Basic + 基本分析 |
| Premium+ | Premium + 詳細分析 / ナレッジ閲覧 |

---

## 6. ナレッジ構築システム

### 6.1 ナレッジ単位
**1ナレッジ = 1ブランド/事業 または 1コンテンツシリーズ**

### 6.2 ナレッジドキュメント構造

```
■ SECTION 1: メインターゲット像
├── 現在の状況（職業・年商・居住・家族）
├── 挫折経験・トラウマ（具体的エピソード）
├── 現在の集客状況（各SNSの現実・売上内訳）
├── 環境の制約（撮影環境・在宅時間など）
├── 1日のリアルなスケジュール
├── 表面的な言い訳 vs 本当の恐怖
├── 商品を知った瞬間の心理変化
├── 理想と現実のギャップ
├── 購入を決意する瞬間の心理
├── 核心的インサイト
├── 刺さるメッセージ（ダメな訴求 vs 刺さる訴求）
├── 顧客の「表面の悩み」
├── 顧客の「深い悩み・欲求・本音」（インサイト）
└── その悩みに気づいたきっかけやエピソード

■ SECTION 2: サブターゲット像
└── （メインターゲットと同じ項目構造）

■ SECTION 3: 競合分析（Competitor）
├── 競合の主なサービス・プレイヤー
├── 競合が提供している主な価値・メソッド・切り口
├── 競合がカバーしきれていないターゲットの不満・ニーズ
└── 顧客が競合に感じている不満・課題・限界

■ SECTION 4: 自社分析（Company）
├── 自身・事業の強み／技術・ノウハウ／実績
├── どんな想いでこのビジネスをやっているか（ミッション・理念）
├── 競合と違う点・自分ならではの価値
└── 実際に成果を出した事例

■ SECTION 5: AHAコンセプト
├── 常識破壊（業界の常識 → 新常識）
├── インサイト（顧客が気づいていない深い欲求）
└── シンプルな解決策＆キャッチーなネーミング

■ SECTION 6: コンセプトまとめ
├── カテゴリー（どんな分野か）
├── ターゲット（どんな悩みや欲求を持った人が対象か）
├── メソッド（どんな手法を使うのか）
├── ベネフィット（どんな未来やゴールにつながるか）
├── キャラクター（講師のキャラクター）
└── ストーリー（経歴やこれまでの変容ストーリー）

■ SECTION 7: カスタマージャーニー
├── Customer（顧客の現状）
├── Competitor（競合の限界）
├── Company（独自の解決策）
└── Concept（新しい解決策の提示）

■ SECTION 8: プロモーション戦略 & 商品設計（オプション）
├── ファネル設計（無料オファー→フロント→バックエンド）
├── 商品名・価格帯
└── カリキュラム概要
```

### 6.3 ナレッジ構築チャットボット

#### 目的
ヒアリングシートを送付する代わりに、チャット形式でクライアントから情報を引き出し、ナレッジを自動構築する。

#### 設計思想
- 「分からない」と言われたら、別の角度から質問（エピソードベース）
- 抽象的な回答には「例えば？」「具体的には？」と深掘り
- 必要な資料はその場でアップロード依頼
- 外部AIに逃げなくても、このチャットボットだけで完結

#### ヒアリングフロー（8ステップ）
```
STEP 1: ビジネス基本情報
└── 業種、年商、事業年数、提供サービス

STEP 2: メインターゲット深掘り
├── 基本属性（年齢・職業・性別・家族構成）
├── 現在の状況と環境
├── 挫折経験・トラウマ（具体的エピソード）
├── 1日のスケジュール
├── 表面の悩み → 深い悩み・本音へ深掘り
├── 理想と現実のギャップ
└── 購入決定の心理

STEP 3: サブターゲット（任意）
└── メインと同様の深掘り

STEP 4: 競合分析
├── 主な競合サービス・プレイヤー
├── 競合の価値・メソッド
└── 競合への顧客の不満

STEP 5: 自社の強み・差別化
├── 技術・ノウハウ・実績
├── ミッション・理念
└── 成果事例

STEP 6: AHAコンセプト構築
├── 破壊したい業界の常識
├── 顧客のインサイト
└── 解決策のネーミング

STEP 7: コンセプト・ストーリー
├── 講師のキャラクター
└── 変容ストーリー

STEP 8: 商品設計（任意）
└── 価格帯・カリキュラム
```

#### 「分からない」への対応パターン
| ユーザーの反応 | チャットボットの対応 |
|--------------|-------------------|
| 「分からない」 | 別の角度から質問（エピソードベース） |
| 「考えたことない」 | 過去のお客様の具体例を聞く |
| 抽象的な回答 | 「例えば？」「具体的には？」と深掘り |
| 長文で回答 | 要点を整理して確認 |
| 資料が必要な場面 | 「〇〇があればアップロードしてください」 |

#### 出力
- ナレッジドキュメント（上記構造に自動埋め込み）
- データベースに自動保存
- PDF/Markdown形式でエクスポート可能

### 6.4 ナレッジ連携フロー

```
【ナレッジDB】
     │
     ├──→ 台本生成AI
     │    「ナレッジのターゲット像・インサイトを参照」
     │    「刺さるメッセージを使用」
     │
     ├──→ サムネイル生成AI
     │    「ターゲットの悩み・キャッチコピーを参照」
     │
     ├──→ メタデータ生成AI
     │    「競合分析・SEOキーワードを参照」
     │
     └──→ LP/ウェビナー台本AI
          「カスタマージャーニー・AHAコンセプトを参照」

【MCPエージェント確認フロー】
各機能実行時に毎回ナレッジと照合
├── 「このターゲットに対して、このメッセージは適切か？」
├── 「インサイトとズレていないか？」
└── 「刺さる訴求を使っているか？」
```

---

## 7. ワークフロー設計

### 7.1 動画制作ワークフロー

```
┌─────────────────────────────────────────────────────────────┐
│  STEP 1: 競合調査・トレンド分析                               │
│  ├── YouTube競合チャンネル分析                               │
│  ├── Amazon書籍ランキング・レビュー収集                       │
│  ├── Instagram競合分析（自社アカウント経由）                  │
│  ├── 検索トレンド分析（SerpApi）                             │
│  └── [人間確認] 調査結果レビュー                             │
├─────────────────────────────────────────────────────────────┤
│  STEP 2: 企画立案                                            │
│  ├── AI企画提案（ナレッジ参照）                              │
│  ├── コンテンツカレンダー配置                                │
│  └── [人間確認] 企画承認                                     │
├─────────────────────────────────────────────────────────────┤
│  STEP 3: 台本生成                                            │
│  ├── Gemini版台本生成（パターンA）                           │
│  ├── Claude版台本生成（パターンB）                           │
│  ├── 比較表示・選択                                          │
│  └── [人間確認] 台本承認                                     │
├─────────────────────────────────────────────────────────────┤
│  STEP 4: メタデータ生成                                       │
│  ├── タイトル候補生成                                        │
│  ├── 説明文生成                                              │
│  ├── タグ・ハッシュタグ生成                                  │
│  ├── サムネイル生成（Nano Banana Pro）                       │
│  └── [人間確認] メタデータ承認                               │
├─────────────────────────────────────────────────────────────┤
│  STEP 5: 音声生成                                            │
│  ├── MiniMax Audio ボイスクローン                            │
│  └── [人間確認] 音声確認                                     │
├─────────────────────────────────────────────────────────────┤
│  STEP 6: アバター動画生成                                     │
│  ├── HeyGen API 動画生成                                     │
│  └── [人間確認] 動画確認                                     │
├─────────────────────────────────────────────────────────────┤
│  STEP 7: 編集・B-roll挿入                                     │
│  ├── Vrew/Premiere連携                                       │
│  ├── B-roll生成（Veo/Sora）                                  │
│  ├── 補足スライド生成（Notebook LM）                         │
│  └── [人間確認] 最終動画確認                                 │
├─────────────────────────────────────────────────────────────┤
│  STEP 8: 公開                                                │
│  ├── YouTube投稿                                             │
│  ├── TikTok/Instagram投稿（オプション）                      │
│  └── [人間確認] 公開確認                                     │
└─────────────────────────────────────────────────────────────┘
```

### 7.2 クライアント用承認フロー

```
[制作物生成] → [社内確認（Team）] → [クライアント提示]
                                          ↓
                              ┌───────────────────┐
                              │ クライアント確認画面 │
                              │ ・プレビュー表示    │
                              │ ・承認ボタン       │
                              │ ・修正依頼ボタン   │
                              │ ・コメント入力     │
                              └───────────────────┘
                                          ↓
                              [承認] → [公開処理]
                              [修正] → [再生成] → [再提示]
```

---

## 8. データベース設計（概要）

### 8.1 主要テーブル

```
users
├── id (UUID)
├── email
├── name
├── role (owner/team/client_premium_plus/client_premium/client_basic)
├── created_at
└── updated_at

clients
├── id (UUID)
├── user_id (FK)
├── company_name
├── plan (basic/premium/premium_plus)
├── knowledge_count
└── created_at

knowledges
├── id (UUID)
├── client_id (FK)
├── name
├── type (brand/series)
├── content (JSONB)
├── embedding (vector)
├── created_at
└── updated_at

projects
├── id (UUID)
├── client_id (FK)
├── knowledge_id (FK)
├── name
├── status
└── created_at

videos
├── id (UUID)
├── project_id (FK)
├── title
├── script
├── status (draft/in_production/pending_approval/approved/published)
├── youtube_url
├── analytics (JSONB)
└── created_at

workflow_steps
├── id (UUID)
├── video_id (FK)
├── step_name
├── status (pending/in_progress/completed/rejected)
├── approver_id (FK)
├── approved_at
├── comments
└── created_at

chat_sessions
├── id (UUID)
├── client_id (FK)
├── knowledge_id (FK)
├── current_step
├── messages (JSONB)
├── status (in_progress/completed)
└── created_at
```

---

## 9. セキュリティ要件

### 9.1 認証
- OAuth 2.0 / OpenID Connect
- JWT トークン認証
- セッション管理（Redis）

### 9.2 認可
- ロールベースアクセス制御（RBAC）
- リソースレベルの権限チェック
- クライアント別データ分離

### 9.3 データ保護
- 通信の暗号化（HTTPS/TLS 1.3）
- データベース暗号化（at rest）
- APIキーの安全な管理（環境変数/Secret Manager）

---

## 10. 非機能要件

### 10.1 パフォーマンス
| 項目 | 目標値 |
|-----|-------|
| ページロード時間 | 3秒以内 |
| API応答時間 | 500ms以内（非同期処理除く） |
| 同時接続ユーザー数 | 50名 |

### 10.2 可用性
| 項目 | 目標値 |
|-----|-------|
| 稼働率 | 99.5% |
| 計画メンテナンス | 月1回（深夜帯） |

### 10.3 スケーラビリティ
- コンテナベースのスケールアウト対応
- データベースのリードレプリカ対応

---

## 11. 開発フェーズ

### Phase 1: MVP（個人利用）
- 基本ワークフロー実装
- YouTube API連携
- 台本生成（Claude + Gemini）
- ナレッジ構築チャットボット
- 動画生成連携（HeyGen）

### Phase 2: チーム利用
- マルチユーザー対応
- 承認フロー実装
- ダッシュボード拡張
- 分析機能

### Phase 3: クライアント提供
- クライアントポータル
- プラン別アクセス制御
- 請求・決済連携
- ホワイトラベル対応

---

## 12. 参考資料

### 12.1 UIデザイン参考
- React + Tailwind CSS実装コード（提供済み）
- ダークモード/ライトモード対応

### 12.2 ナレッジテンプレート参考
- スタートアップコンサルシート｜AIアバター超集客法.pdf

---

---

**作成日**: 2025-12-11
**最終更新日**: 2025-12-14
**バージョン**: 2.0
**作成者**: Creator Studio AI 開発チーム

**注**: 実装済み機能の詳細は docs/SCOPE_PROGRESS.md およびコードベースを参照してください。
